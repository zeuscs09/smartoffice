import{d as B,u as P,r as n,q as w,g as _,w as D,c as b,y as g,x as M,a as t,F as O,o as f,B as o,l as j,z as i,H as x,C as L,b as y,v as U,_ as $}from"./index-BjUjyLbN.js";import{u as I}from"./userLayout-ZLl1ofLD.js";import{u as N,E as H}from"./ExpenseEntryTable-Bo4u8UDD.js";import{_ as Q}from"./Pagination.vue_vue_type_script_setup_true_lang-BjD5Jrpi.js";import{_ as T}from"./TimeLine.vue_vue_type_script_setup_true_lang-DCBmTZH1.js";import"./UserAvatar--QHl542-.js";import"./NoDataFoundTable-CQstSkm9.js";import"./NoDataFoundCard-Dr_8P_bw.js";const q={class:"container mx-auto p-4"},G={class:"flex justify-between items-center mb-4"},J={class:"breadcrumbs text-sm"},K={class:"flex gap-2"},W={key:0,class:"flex flex-wrap gap-4 mb-4"},X={class:"modal-box w-11/12 max-w-5xl"},Y=B({__name:"ExpenseEntryList",setup(Z){const h=P(),e=N();e.pageSize=10;const d=n(""),u=n(""),p=n(""),m=n(""),v=n(10),r=n(!1),k=w(()=>e.data.length),C=w(()=>{var l;return((l=e.documentsResource.data)==null?void 0:l.total)||0});_(()=>{e.fetchAll(1)});const E=()=>{r.value=!r.value},F=()=>{e.searchQuery=d.value,e.fetchAll(1)},c=()=>{e.statusFilter=u.value,e.startDate=p.value,e.endDate=m.value,e.fetchAll(1)},A=l=>{e.sortField===l?e.sortOrder=e.sortOrder==="asc"?"desc":"asc":(e.sortField=l,e.sortOrder="asc"),e.fetchAll(1)},z=l=>{v.value=l,e.pageSize=l,e.fetchAll(1)},S=()=>{location.href="/app/smo-expense-entry/new?from=frontend"},R=n(null),V=n([]);return D(v,l=>{console.log("Page size changed to:",l)}),(l,s)=>(f(),b(O,null,[g(I,null,{default:M(()=>[t("div",q,[t("div",G,[t("div",J,[t("ul",null,[t("li",null,[t("a",{onClick:s[0]||(s[0]=a=>o(h).push("/"))},"Home")]),s[7]||(s[7]=t("li",null,"Expense Entry",-1))])]),t("div",K,[t("button",{class:"btn btn-ghost btn-sm",onClick:S},s[8]||(s[8]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)])),t("button",{class:j(["btn btn-sm",{"btn-ghost":!r.value}]),onClick:E},s[9]||(s[9]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})],-1)]),2)])]),r.value?(f(),b("div",W,[i(t("input",{type:"text",placeholder:"Search...",class:"input input-bordered flex-grow","onUpdate:modelValue":s[1]||(s[1]=a=>d.value=a),onInput:F},null,544),[[x,d.value]]),i(t("select",{class:"select select-bordered w-full max-w-xs","onUpdate:modelValue":s[2]||(s[2]=a=>u.value=a),onChange:c},s[10]||(s[10]=[t("option",{value:""},"All",-1),t("option",{value:"Draft"},"Draft",-1),t("option",{value:"Approval Review"},"Approval Review",-1),t("option",{value:"Approved"},"Approve",-1),t("option",{value:"Rejected"},"Reject",-1)]),544),[[L,u.value]]),i(t("input",{type:"date",class:"input input-bordered","onUpdate:modelValue":s[3]||(s[3]=a=>p.value=a),onChange:c},null,544),[[x,p.value]]),i(t("input",{type:"date",class:"input input-bordered","onUpdate:modelValue":s[4]||(s[4]=a=>m.value=a),onChange:c},null,544),[[x,m.value]])])):y("",!0),g(H,{data:o(e).data,loading:o(e).documentsResource.loading,error:o(e).documentsResource.error,sortField:o(e).sortField,sortOrder:o(e).sortOrder,onSort:A},null,8,["data","loading","error","sortField","sortOrder"]),o(e).data.length>0?(f(),U(Q,{key:1,"current-page":o(e).currentPage,"is-first-page":o(e).isFirstPage,"is-last-page":o(e).isLastPage,"page-size":v.value,"displayed-items-count":k.value,"total-items":C.value,onPrevious:s[5]||(s[5]=a=>o(e).previousPage()),onNext:s[6]||(s[6]=a=>o(e).nextPage()),"onUpdate:pageSize":z},null,8,["current-page","is-first-page","is-last-page","page-size","displayed-items-count","total-items"])):y("",!0)])]),_:1}),t("dialog",{id:"timeline_modal",class:"modal",ref_key:"timelineModal",ref:R},[t("div",X,[s[11]||(s[11]=t("h3",{class:"font-bold text-lg mb-4"},"ประวัติการอนุมัติ",-1)),g(T,{events:V.value},null,8,["events"]),s[12]||(s[12]=t("div",{class:"modal-action"},[t("form",{method:"dialog"},[t("button",{class:"btn"},"ปิด")])],-1))])],512)],64))}}),ie=$(Y,[["__scopeId","data-v-7ae64965"]]);export{ie as default};
