import{d as N,u as z,r as p,p as S,q as f,g as U,v as Y,x as j,o as s,a as e,B as I,l as w,c as a,z as h,C as k,F as r,i as u,t as c,b as R,I as T,y as W,_ as A}from"./index-BjUjyLbN.js";import{u as q}from"./userLayout-ZLl1ofLD.js";import{U as E}from"./UserAvatar--QHl542-.js";const H={class:"container mx-auto p-4"},G={class:"flex justify-between items-center mb-4"},J={class:"breadcrumbs text-sm"},K={class:"flex gap-2"},O={key:0,class:"flex flex-wrap gap-4 mb-4"},P={class:"form-control"},Q=["value"],X={class:"form-control"},Z=["value"],ee={class:"overflow-x-auto relative shadow-md rounded-lg mb-4"},le={class:"w-full"},te={class:"bg-gray-100"},se={class:"text-xs"},ae={class:"sticky left-0 z-10 bg-white p-2 min-w-[200px]"},oe={class:"flex items-center space-x-2"},ne={class:"font-medium"},re={class:"flex flex-wrap gap-4 justify-center"},ue=N({__name:"WorkLoad",setup(ce){const y=z(),v=p(!1),C=()=>{v.value=!v.value},i=p(new Date().getMonth()+1),d=p(new Date().getFullYear()),_=S({url:"smartoffice.api.planing.get_team_workload",auto:!1}),D=[{value:1,label:"มกราคม"},{value:2,label:"กุมภาพันธ์"},{value:3,label:"มีนาคม"},{value:4,label:"เมษายน"},{value:5,label:"พฤษภาคม"},{value:6,label:"มิถุนายน"},{value:7,label:"กรกฎาคม"},{value:8,label:"สิงหาคม"},{value:9,label:"กันยายน"},{value:10,label:"ตุลาคม"},{value:11,label:"พฤศจิกายน"},{value:12,label:"ธันวาคม"}],g=new Date().getFullYear(),V=f(()=>{const o=[];for(let t=g-5;t<=g+5;t++)o.push(t);return o}),x=f(()=>new Date(d.value,i.value,0).getDate()),$=["อา.","จ.","อ.","พ.","พฤ.","ศ.","ส."],B=o=>{const t=new Date(d.value,i.value-1,o);return $[t.getDay()]},F=f(()=>_.data),b={available:"bg-green-200",unavailable:"bg-red-200",holiday:"bg-gray-200",work_on_holiday:"bg-red-500",default:"bg-white"},L=o=>{const t="p-2 transition-colors duration-200",l=b[o]||b.default,n=`hover:${l.replace("bg-","bg-opacity-75 ")}`;return`${t} ${l} ${n}`},M=o=>{switch(o){case"available":return"ว่าง";case"unavailable":return"ไม่ว่าง";case"holiday":return"วันหยุด";case"work_on_holiday":return"ทำงานในวันหยุด";default:return"ไม่ระบุ"}},m=()=>{_.fetch({year:d.value,month:i.value})};return U(()=>{m()}),(o,t)=>(s(),Y(q,null,{default:j(()=>[e("div",H,[e("div",G,[e("div",J,[e("ul",null,[e("li",null,[e("a",{onClick:t[0]||(t[0]=l=>I(y).push("/"))},"Home")]),t[3]||(t[3]=e("li",null,"Team Workload",-1))])]),e("div",K,[e("button",{class:w(["btn btn-sm",{"btn-ghost":!v.value}]),onClick:C},t[4]||(t[4]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})],-1)]),2)])]),v.value?(s(),a("div",O,[e("div",P,[t[5]||(t[5]=e("label",{class:"label"},[e("span",{class:"label-text"},"เดือน")],-1)),h(e("select",{onChange:m,"onUpdate:modelValue":t[1]||(t[1]=l=>i.value=l),class:"select select-bordered w-full max-w-xs"},[(s(),a(r,null,u(D,l=>e("option",{key:l.value,value:l.value},c(l.label),9,Q)),64))],544),[[k,i.value]])]),e("div",X,[t[6]||(t[6]=e("label",{class:"label"},[e("span",{class:"label-text"},"ปี")],-1)),h(e("select",{onChange:m,"onUpdate:modelValue":t[2]||(t[2]=l=>d.value=l),class:"select select-bordered w-full max-w-xs"},[(s(!0),a(r,null,u(V.value,l=>(s(),a("option",{key:l,value:l},c(l),9,Z))),128))],544),[[k,d.value]])])])):R("",!0),e("div",ee,[e("table",le,[e("thead",null,[e("tr",te,[t[8]||(t[8]=e("th",{class:"sticky left-0 z-10 bg-gray-100 p-2 text-center min-w-[200px]"},"ชื่อ",-1)),(s(!0),a(r,null,u(x.value,l=>(s(),a("th",{key:l,class:"p-2 text-center min-w-[60px]"},[T(c(l),1),t[7]||(t[7]=e("br",null,null,-1)),e("span",se,c(B(l)),1)]))),128))])]),e("tbody",null,[(s(!0),a(r,null,u(F.value,l=>(s(),a("tr",{key:l.id},[e("td",ae,[e("div",oe,[W(E,{email:l.user_id,class:"w-8 h-8"},null,8,["email"]),e("span",ne,c(l.name),1)])]),(s(!0),a(r,null,u(x.value,n=>(s(),a("td",{key:`${l.id}-${n}`,class:w([L(l.status[n]),"min-w-[60px]"])},null,2))),128))]))),128))])])]),e("div",re,[(s(),a(r,null,u(b,(l,n)=>e("div",{key:n,class:"flex items-center"},[e("div",{class:w(["w-6 h-6 rounded mr-2",l])},null,2),e("span",null,c(M(n)),1)])),64))])])]),_:1}))}}),be=A(ue,[["__scopeId","data-v-7ada7484"]]);export{be as default};
