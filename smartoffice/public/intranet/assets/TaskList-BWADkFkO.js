import{d as A,u as L,m as M,r as u,q as D,g as P,v as I,x as q,o as l,a as s,B as o,l as i,c as d,z as m,H as w,C as j,b as S,I as c,t as n,y as g,F as T,i as O,_ as H}from"./index-BjUjyLbN.js";import{u as J}from"./userLayout-ZLl1ofLD.js";import{u as Q}from"./taskStore-XYmsuEBJ.js";import{U as V}from"./UserAvatar--QHl542-.js";import{S as E,N as G}from"./NoDataFoundTable-CQstSkm9.js";const K={class:"container mx-auto p-4"},W={class:"flex justify-between items-center mb-4"},X={class:"breadcrumbs text-sm"},Y={class:"flex gap-2"},Z={key:0,class:"flex flex-wrap gap-4 mb-4"},ss={class:"hidden md:block overflow-x-auto mt-4"},es={class:"table table-zebra w-full"},ts={class:"ml-1"},as={class:"ml-1"},os={class:"ml-1"},ns={key:0},ls={colspan:"5"},ds={key:1},is=["onClick"],rs=["onClick"],us={class:"badge badge-sm badge-ghost"},cs={key:2},ms={colspan:"5"},ps={class:"md:hidden space-y-4 mt-4"},bs={key:0},vs={key:1},gs={class:"card-body p-4"},_s={class:"flex justify-between items-start mb-2"},fs=["onClick"],xs={class:"text-sm text-gray-600 mb-2"},ys={class:"text-sm"},ks={class:"text-xs text-gray-500"},hs={class:"mt-1"},ws={class:"badge badge-sm badge-ghost"},Cs={class:"flex justify-end mt-2"},Fs={key:2},Ds={class:"flex justify-between items-center mt-4"},js={class:"join"},Ss=["disabled"],Ts={class:"join-item btn"},Os=["disabled"],Vs={class:"text-sm text-gray-600 mt-2"},$s=A({__name:"TaskList",setup(zs){const p=L(),t=Q(),C=M("formatDate"),_=u(""),f=u(""),x=u(""),y=u(""),k=u(10),b=u(!1),$=D(()=>t.data.length),z=D(()=>{var r;return((r=t.documentsResource.data)==null?void 0:r.total)||0});P(()=>{t.pageSize=10,v()});const B=()=>{b.value=!b.value},N=()=>{t.searchQuery=_.value,t.fetchAll(1)},v=()=>{t.statusFilter=f.value,t.startDate=x.value,t.endDate=y.value,t.fetchAll(1)},h=r=>{t.sortField===r?t.sortOrder=t.sortOrder==="asc"?"desc":"asc":(t.sortField=r,t.sortOrder="asc"),t.fetchAll(1)},R=()=>{t.pageSize=k.value,t.fetchAll(1)},U=()=>{window.location.href="/app/smo-task/new?from=front_end"};return(r,e)=>(l(),I(J,null,{default:q(()=>[s("div",K,[s("div",W,[s("div",X,[s("ul",null,[s("li",null,[s("a",{onClick:e[0]||(e[0]=a=>o(p).push("/"))},"Home")]),e[11]||(e[11]=s("li",null,"My Task",-1))])]),s("div",Y,[s("button",{onClick:U,class:"btn btn-ghost btn-sm"},e[12]||(e[12]=[s("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)])),s("button",{class:i(["btn btn-sm",{"btn-ghost":!b.value}]),onClick:B},e[13]||(e[13]=[s("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})],-1)]),2)])]),b.value?(l(),d("div",Z,[m(s("input",{type:"text",placeholder:"Search...",class:"input input-bordered flex-grow","onUpdate:modelValue":e[1]||(e[1]=a=>_.value=a),onInput:N},null,544),[[w,_.value]]),m(s("select",{class:"select select-bordered w-full max-w-xs","onUpdate:modelValue":e[2]||(e[2]=a=>f.value=a),onChange:v},e[14]||(e[14]=[s("option",{value:""},"ทุกสถานะ",-1),s("option",{value:"Open"},"เปิด",-1),s("option",{value:"Closed"},"ปิด",-1),s("option",{value:"Cancelled"},"ยกเลิก",-1)]),544),[[j,f.value]]),m(s("input",{type:"date",class:"input input-bordered","onUpdate:modelValue":e[3]||(e[3]=a=>x.value=a),onChange:v},null,544),[[w,x.value]]),m(s("input",{type:"date",class:"input input-bordered","onUpdate:modelValue":e[4]||(e[4]=a=>y.value=a),onChange:v},null,544),[[w,y.value]])])):S("",!0),s("div",ss,[s("table",es,[s("thead",null,[s("tr",null,[s("th",{class:"cursor-pointer",onClick:e[5]||(e[5]=a=>h("reference_name"))},[e[15]||(e[15]=c(" No. ")),s("span",ts,[s("span",{class:i({"text-primary":o(t).sortField==="reference_name"})},n(o(t).sortField==="reference_name"&&o(t).sortOrder==="asc"?"▲":"△"),3),s("span",{class:i({"text-primary":o(t).sortField==="reference_name"})},n(o(t).sortField==="reference_name"&&o(t).sortOrder==="desc"?"▼":"▽"),3)])]),s("th",{class:"cursor-pointer",onClick:e[6]||(e[6]=a=>h("status"))},[e[16]||(e[16]=c(" Task ")),s("span",as,[s("span",{class:i({"text-primary":o(t).sortField==="status"})},n(o(t).sortField==="status"&&o(t).sortOrder==="asc"?"▲":"△"),3),s("span",{class:i({"text-primary":o(t).sortField==="status"})},n(o(t).sortField==="status"&&o(t).sortOrder==="desc"?"▼":"▽"),3)])]),s("th",{class:"cursor-pointer",onClick:e[7]||(e[7]=a=>h("due_date"))},[e[17]||(e[17]=c(" Job Date ")),s("span",os,[s("span",{class:i({"text-primary":o(t).sortField==="due_date"})},n(o(t).sortField==="due_date"&&o(t).sortOrder==="asc"?"▲":"△"),3),s("span",{class:i({"text-primary":o(t).sortField==="due_date"})},n(o(t).sortField==="due_date"&&o(t).sortOrder==="desc"?"▼":"▽"),3)])]),e[18]||(e[18]=s("th",null,"Customer",-1)),e[19]||(e[19]=s("th",null,"Responsible",-1))])]),o(t).documentsResource.loading?(l(),d("tbody",ns,[s("tr",null,[s("td",ls,[g(E)])])])):S("",!0),o(t).data.length>0?(l(),d("tbody",ds,[(l(!0),d(T,null,O(o(t).data,a=>(l(),d("tr",{key:a.name},[s("td",null,[s("span",{class:"cursor-pointer",onClick:F=>o(p).push({name:"TaskDetail",params:{id:a.reference_name},query:{todo:a.name}})},n(a.reference_name),9,is)]),s("td",null,[s("span",{class:"cursor-pointer",onClick:F=>o(p).push({name:"TaskDetail",params:{id:a.reference_name}})},n(a.description),9,rs),e[20]||(e[20]=s("br",null,null,-1)),s("span",{class:i(["badge badge-sm",{"badge-primary":a.status==="Open","badge-success":a.status==="Closed","badge-error":a.status==="Cancelled"}])},n(a.status),3)]),s("td",null,n(o(C)(a.due_date)),1),s("td",null,[c(n(a.contact_person)+" - "+n(a.contact_email)+" ",1),e[21]||(e[21]=s("br",null,null,-1)),s("span",us,n(a.project),1)]),s("td",null,[g(V,{email:a.assign_to},null,8,["email"])])]))),128))])):(l(),d("tbody",cs,[s("tr",null,[s("td",ms,[g(G)])])]))])]),s("div",ps,[o(t).documentsResource.loading?(l(),d("div",bs,e[22]||(e[22]=[s("div",{class:"card bg-base-100 shadow-xl animate-pulse"},[s("div",{class:"card-body"},[s("div",{class:"h-4 bg-gray-300 rounded w-3/4 mb-2"}),s("div",{class:"h-4 bg-gray-300 rounded w-1/2 mb-2"}),s("div",{class:"h-4 bg-gray-300 rounded w-1/4"})])],-1)]))):o(t).data.length>0?(l(),d("div",vs,[(l(!0),d(T,null,O(o(t).data,a=>(l(),d("div",{key:a.name,class:"card bg-base-100 shadow-xl mb-4"},[s("div",gs,[s("div",_s,[s("h2",{class:"card-title text-base cursor-pointer",onClick:F=>o(p).push({name:"TaskDetail",params:{id:a.reference_name},query:{todo:a.name}})},n(a.reference_name),9,fs),s("span",{class:i(["badge badge-sm",{"badge-primary":a.status==="Open","badge-success":a.status==="Closed","badge-error":a.status==="Cancelled"}])},n(a.status),3)]),s("p",xs,n(a.description),1),s("div",ys,[s("p",null,[e[23]||(e[23]=s("span",{class:"font-semibold"},"Job Date:",-1)),c(" "+n(o(C)(a.due_date)),1)]),s("p",null,[e[24]||(e[24]=s("span",{class:"font-semibold"},"Customer:",-1)),c(" "+n(a.contact_person),1)]),s("p",ks,n(a.contact_email),1),s("p",hs,[s("span",ws,n(a.project),1)])]),s("div",Cs,[s("div",null,[e[25]||(e[25]=s("p",{class:"text-xs text-gray-500 mb-1"},"Responsible:",-1)),g(V,{email:a.assign_to},null,8,["email"])])])])]))),128))])):(l(),d("div",Fs,e[26]||(e[26]=[s("div",{class:"card bg-base-100 shadow-xl"},[s("div",{class:"card-body"},[s("p",{class:"text-center"},"No Data Found")])],-1)])))]),s("div",Ds,[s("div",js,[s("button",{class:"join-item btn",onClick:e[8]||(e[8]=a=>o(t).previousPage()),disabled:o(t).isFirstPage}," « ",8,Ss),s("button",Ts," หน้า "+n(o(t).currentPage),1),s("button",{class:"join-item btn",onClick:e[9]||(e[9]=a=>o(t).nextPage()),disabled:o(t).isLastPage}," » ",8,Os)]),m(s("select",{"onUpdate:modelValue":e[10]||(e[10]=a=>k.value=a),onChange:R,class:"select select-bordered"},e[27]||(e[27]=[s("option",{value:10},"10 รายการ/หน้า",-1),s("option",{value:20},"20 รายการ/หน้า",-1),s("option",{value:50},"50 รายการ/หน้า",-1)]),544),[[j,k.value]])]),s("div",Vs," แสดง "+n($.value)+" จาก "+n(z.value)+" รายการ ",1)])]),_:1}))}}),Ls=H($s,[["__scopeId","data-v-ec90fb17"]]);export{Ls as default};
