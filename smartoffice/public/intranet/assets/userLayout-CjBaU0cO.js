var m=(k,n,a)=>new Promise((l,u)=>{var b=s=>{try{r(a.next(s))}catch(i){u(i)}},g=s=>{try{r(a.throw(s))}catch(i){u(i)}},r=s=>s.done?l(s.value):Promise.resolve(s.value).then(b,g);r((a=a.apply(k,n)).next())});import{d as V,u as j,r as w,p as _,g as R,q as x,c,a as t,B as f,E as C,t as h,b as L,k as S,G as M,o as p,_ as B}from"./index-by_FZnAW.js";const $={class:"container mx-auto bg-base-200 min-h-screen"},G={class:"drawer-content flex flex-col"},H={class:"navbar bg-base-100"},z={class:"flex-1"},N={class:"flex-none"},I={class:"indicator"},T={key:0,class:"badge badge-xs badge-primary indicator-item"},q={class:"indicator"},D={key:0,class:"badge badge-xs badge-primary indicator-item"},E={class:"dropdown dropdown-end"},P={tabindex:"0",class:"btn btn-ghost btn-circle avatar"},U={class:"avatar"},O={class:"w-8 rounded-full"},W=["src"],Z={key:1,class:"bg-primary text-primary-content flex items-center justify-center w-full h-full"},A={tabindex:"0",class:"menu menu-sm dropdown-content mt-3 z-[1] p-2 shadow bg-base-100 rounded-box w-52"},F=["href"],J={class:"p-4 bg-base-100 flex-grow shadow-lg rounded-sm m-4"},K=V({__name:"userLayout",setup(k){const n=j(),a=w(""),l=w(""),u=_({url:"smartoffice.api.task.get_todos_with_smo_tasks",auto:!1}),b=_({url:"smartoffice.api.mailbox.get_mail_box",auto:!1});R(()=>{u.fetch({page:1,page_size:1,status:"Open"}),b.fetch({page:1,page_size:1,status:"unread"}),a.value=i("full_name")||"",l.value=i("user_image")||""});const g=x(()=>{var e;return((e=u.data)==null?void 0:e.total)||0}),r=x(()=>{var e;return((e=b.data)==null?void 0:e.total)||0}),s=()=>m(this,null,function*(){M.logout.submit()});function i(e){var v;const d=`; ${document.cookie}`.split(`; ${e}=`);if(d.length===2)return(v=d.pop())==null?void 0:v.split(";").shift()}const y=e=>e.split(" ").map(o=>o[0]).join("").toUpperCase().slice(0,2);return(e,o)=>(p(),c("div",$,[t("div",G,[t("div",H,[o[8]||(o[8]=t("div",{class:"flex-none lg:hidden"},[t("label",{for:"my-drawer-2",class:"btn btn-square btn-ghost"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",class:"inline-block w-6 h-6 stroke-current"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})])])],-1)),t("div",z,[t("img",{src:"http://smarterp.localhost/files/logo.png",alt:"TPS Logo",class:"h-8 cursor-pointer",onClick:o[0]||(o[0]=d=>f(n).push("/"))})]),t("div",N,[t("button",{class:"btn btn-ghost btn-circle",onClick:o[1]||(o[1]=d=>f(n).push({name:"TaskList"}))},[t("div",I,[o[4]||(o[4]=C('<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" data-v-f0fafdbb><g id="SVGRepo_bgCarrier" stroke-width="0" data-v-f0fafdbb></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round" data-v-f0fafdbb></g><g id="SVGRepo_iconCarrier" data-v-f0fafdbb><path d="M11 19.5H21" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" data-v-f0fafdbb></path><path d="M11 12.5H21" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" data-v-f0fafdbb></path><path d="M11 5.5H21" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" data-v-f0fafdbb></path><path d="M3 5.5L4 6.5L7 3.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" data-v-f0fafdbb></path><path d="M3 12.5L4 13.5L7 10.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" data-v-f0fafdbb></path><path d="M3 19.5L4 20.5L7 17.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" data-v-f0fafdbb></path></g></svg>',1)),g.value>0?(p(),c("span",T,h(g.value),1)):L("",!0)])]),t("button",{class:"btn btn-ghost btn-circle",onClick:o[2]||(o[2]=d=>f(n).push({name:"WorkLoad"}))},o[5]||(o[5]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)])),t("button",{class:"btn btn-ghost btn-circle",onClick:o[3]||(o[3]=d=>f(n).push({name:"MailBoxList"}))},[t("div",q,[o[6]||(o[6]=C('<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" data-v-f0fafdbb><g id="SVGRepo_bgCarrier" stroke-width="0" data-v-f0fafdbb></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round" data-v-f0fafdbb></g><g id="SVGRepo_iconCarrier" data-v-f0fafdbb><path d="M3 8L10.8906 13.2604C11.5624 13.7083 12.4376 13.7083 13.1094 13.2604L21 8M5 19H19C20.1046 19 21 18.1046 21 17V7C21 5.89543 20.1046 5 19 5H5C3.89543 5 3 5.89543 3 7V17C3 18.1046 3.89543 19 5 19Z" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-f0fafdbb></path></g></svg>',1)),r.value>0?(p(),c("span",D,h(r.value),1)):L("",!0)])]),t("div",E,[t("label",P,[t("div",U,[t("div",O,[l.value?(p(),c("img",{key:0,src:l.value,alt:"User avatar"},null,8,W)):(p(),c("div",Z,h(y(a.value)),1))])])]),t("ul",A,[t("li",null,[t("a",{href:`/app/user/${f(M).user}`},"Profile",8,F)]),o[7]||(o[7]=t("li",null,[t("a",{href:"/app"},"Desk")],-1)),t("li",null,[t("a",{onClick:s},"Logout")])])])])]),t("div",J,[S(e.$slots,"default",{},void 0,!0)])])]))}}),Y=B(K,[["__scopeId","data-v-f0fafdbb"]]);export{Y as u};
