import{d as M,u as B,r as a,q as h,g as D,M as j,c as k,y as f,x as L,a as e,F as U,o as x,B as o,l as I,z as u,H as b,C as N,b as C,v as T,_ as $}from"./index-by_FZnAW.js";import{u as H}from"./userLayout-CjBaU0cO.js";import{u as O,E as Q}from"./ExpenseRequestTable-Ow4X-TcU.js";import{_ as G}from"./Pagination.vue_vue_type_script_setup_true_lang-B95xIR62.js";import"./UserAvatar-X8AlCWQw.js";import"./TimeLine.vue_vue_type_script_setup_true_lang-CltP6rVV.js";const J={class:"container mx-auto p-4"},K={class:"flex justify-between items-center mb-4"},W={class:"breadcrumbs text-sm"},X={class:"flex gap-2"},Y={key:0,class:"flex flex-wrap gap-4 mb-4"},Z={class:"overflow-x-auto mt-4"},ee={class:"modal-box w-11/12 max-w-5xl"},te=M({__name:"ExpenseRequestList",setup(se){const y=B(),t=O();t.pageSize=10;const d=a(""),p=a(""),v=a(""),m=a(""),w=a(10),r=a(!1),R=h(()=>t.data.length),A=h(()=>{var n;return((n=t.documentsResource.data)==null?void 0:n.total)||0});D(()=>{t.fetchAll(1)});const F=()=>{r.value=!r.value},S=()=>{t.searchQuery=d.value,t.fetchAll(1)},c=()=>{t.statusFilter=p.value,t.startDate=v.value,t.endDate=m.value,t.fetchAll(1)},g=a(""),i=a("asc"),z=n=>{g.value===n?i.value=i.value==="asc"?"desc":"asc":(g.value=n,i.value="asc"),t.sortField=g.value,t.sortOrder=i.value,t.fetchAll(1)},E=n=>{w.value=n,t.pageSize=n,t.fetchAll(1)},P=()=>{location.href="/app/smo-expense-request/new"},V=a(null),_=a([]);return(n,s)=>{const q=j("Timeline");return x(),k(U,null,[f(H,null,{default:L(()=>[e("div",J,[e("div",K,[e("div",W,[e("ul",null,[e("li",null,[e("a",{onClick:s[0]||(s[0]=l=>o(y).push("/"))},"Home")]),s[7]||(s[7]=e("li",null,"Expense Request",-1))])]),e("div",X,[e("button",{class:"btn btn-neutral btn-sm",onClick:P},s[8]||(s[8]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)])),e("button",{class:I(["btn btn-sm",{"btn-ghost":!r.value}]),onClick:F},s[9]||(s[9]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})],-1)]),2)])]),r.value?(x(),k("div",Y,[u(e("input",{type:"text",placeholder:"Search...",class:"input input-bordered flex-grow","onUpdate:modelValue":s[1]||(s[1]=l=>d.value=l),onInput:S},null,544),[[b,d.value]]),u(e("select",{class:"select select-bordered w-full max-w-xs","onUpdate:modelValue":s[2]||(s[2]=l=>p.value=l),onChange:c},s[10]||(s[10]=[e("option",{value:""},"All",-1),e("option",{value:"Draft"},"Draft",-1),e("option",{value:"Pending Approval"},"Pending Approval",-1),e("option",{value:"Approved"},"Approved",-1),e("option",{value:"Rejected"},"Rejected",-1)]),544),[[N,p.value]]),u(e("input",{type:"date",class:"input input-bordered","onUpdate:modelValue":s[3]||(s[3]=l=>v.value=l),onChange:c},null,544),[[b,v.value]]),u(e("input",{type:"date",class:"input input-bordered","onUpdate:modelValue":s[4]||(s[4]=l=>m.value=l),onChange:c},null,544),[[b,m.value]])])):C("",!0),e("div",Z,[f(Q,{data:o(t).data,loading:o(t).documentsResource.loading,error:o(t).documentsResource.error,"sort-field":o(t).sortField,"sort-order":o(t).sortOrder,sortable:!0,onSort:z},null,8,["data","loading","error","sort-field","sort-order"])]),o(t).data.length>0?(x(),T(G,{key:1,"current-page":o(t).currentPage,"is-first-page":o(t).isFirstPage,"is-last-page":o(t).isLastPage,"page-size":w.value,"displayed-items-count":R.value,"total-items":A.value,onPrevious:s[5]||(s[5]=l=>o(t).previousPage()),onNext:s[6]||(s[6]=l=>o(t).nextPage()),"onUpdate:pageSize":E},null,8,["current-page","is-first-page","is-last-page","page-size","displayed-items-count","total-items"])):C("",!0)])]),_:1}),e("dialog",{id:"timeline_modal",class:"modal",ref_key:"timelineModal",ref:V},[e("div",ee,[s[11]||(s[11]=e("h3",{class:"font-bold text-lg mb-4"},"ประวัติการอนุมัติ",-1)),f(q,{events:_.value},null,8,["events"]),s[12]||(s[12]=e("div",{class:"modal-action"},[e("form",{method:"dialog"},[e("button",{class:"btn"},"ปิด")])],-1))])],512)],64)}}}),ue=$(te,[["__scopeId","data-v-a8bd211b"]]);export{ue as default};
